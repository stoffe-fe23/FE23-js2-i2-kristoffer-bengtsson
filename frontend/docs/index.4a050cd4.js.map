{"mappings":"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","sources":["<anon>","frontend/src/main.js","frontend/src/modules/tasks.js","frontend/src/modules/utilities.js","frontend/src/modules/RestApi.js","frontend/src/modules/interface.js"],"sourcesContent":["/*\r\n    General utility functions\r\n    Collection of any functions I create that may be useful stand-alone for other projects. \r\n\t\r\n    By Kristoffer Bengtsson\r\n*/ //////////////////////////////////////////////////////////////////////////////////////////////////////\n// Set an event listener on the element(s) matching the targetIdentifier selector, if any exist.\n// Return an array with all matching elements. \nfunction $3a07be1bc7c23c7f$export$d031894fc27e45(targetSelector, eventType, eventCallback) {\n    const eventTargets = document.querySelectorAll(targetSelector);\n    const targetElements = [];\n    if (eventTargets !== undefined && eventTargets !== null) eventTargets.forEach((eventTarget)=>{\n        eventTarget.addEventListener(eventType, eventCallback);\n        targetElements.push(eventTarget);\n    });\n    return targetElements;\n}\nfunction $3a07be1bc7c23c7f$export$6c521e86931cae84(timestamp, isMilliSeconds = true, locale = null) {\n    const dateObj = new Date(isMilliSeconds ? timestamp : timestamp * 1000);\n    const formatLocale = locale ?? navigator.language;\n    const formatOptions = {\n        year: \"numeric\",\n        month: \"numeric\",\n        day: \"numeric\",\n        hour: \"numeric\",\n        minute: \"numeric\",\n        second: \"numeric\"\n    };\n    return new Intl.DateTimeFormat(formatLocale, formatOptions).format(dateObj);\n// return `${dateObj.toLocaleDateString(formatLocale)} ${dateObj.toLocaleTimeString(formatLocale)}`;\n}\nfunction $3a07be1bc7c23c7f$export$6ae8771cdbdf4642(truncText, maxLength) {\n    if (maxLength < truncText.length) {\n        let cutOffLength = truncText.lastIndexOf(\" \", maxLength);\n        if (cutOffLength < 1) cutOffLength = maxLength;\n        truncText = truncText.slice(0, cutOffLength) + \"\\u2026\";\n    }\n    return truncText;\n}\nfunction $3a07be1bc7c23c7f$export$5d00c35c068c5f19(contentString, contentElement, allowedTags = null, allowedAttributes = null) {\n    const tempElement = document.createElement(\"template\");\n    tempElement.innerHTML = contentString;\n    if (contentElement === undefined || contentElement === null) contentElement = document.createElement(\"div\");\n    if (allowedTags === undefined || allowedTags === null || allowedTags.length < 1) allowedTags = [\n        \"strong\",\n        \"em\",\n        \"b\",\n        \"i\",\n        \"a\",\n        \"blockquote\"\n    ];\n    if (allowedAttributes === undefined || allowedAttributes === null || allowedAttributes.length < 1) allowedAttributes = [\n        \"href\",\n        \"src\",\n        \"alt\",\n        \"class\",\n        \"id\",\n        \"target\"\n    ];\n    allowedTags = allowedTags.map((elem)=>elem.toUpperCase());\n    allowedAttributes = allowedAttributes.map((elem)=>elem.toLowerCase());\n    $3a07be1bc7c23c7f$var$copyContentWithFilteredTags(tempElement.content, contentElement, allowedTags, allowedAttributes);\n    return contentElement;\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n// Helper function for setContentWithFilteredTags(), step through the baseElement and copy allowed child elements\n// to the target element and add the rest as text. \nfunction $3a07be1bc7c23c7f$var$copyContentWithFilteredTags(baseElement, copyElement, allowedTags, allowedAttributes) {\n    if (baseElement.childNodes.length > 0) baseElement.childNodes.forEach((checkChild)=>{\n        if (checkChild.nodeType == Node.ELEMENT_NODE) {\n            let currElement;\n            if (allowedTags.includes(checkChild.tagName)) {\n                currElement = document.createElement(checkChild.tagName);\n                for (const attrib of checkChild.attributes)if (allowedAttributes.includes(attrib.name)) currElement.setAttribute(attrib.name, attrib.value);\n                copyElement.appendChild(currElement);\n            } else currElement = copyElement;\n            $3a07be1bc7c23c7f$var$copyContentWithFilteredTags(checkChild, currElement, allowedTags, allowedAttributes);\n        } else if (checkChild.nodeType == Node.TEXT_NODE) {\n            const currElement = document.createTextNode(checkChild.textContent);\n            copyElement.appendChild(currElement);\n        }\n    });\n}\nfunction $3a07be1bc7c23c7f$export$354bdc70f691f3a6(textString, openTag, closeTag, tagName = \"tag\") {\n    const fragments = [];\n    let openIdx = 0;\n    let closeIdx = 0;\n    let prevIdx = 0;\n    while(prevIdx < textString.length){\n        openIdx = textString.indexOf(openTag, closeIdx);\n        if (openIdx == -1) {\n            openIdx = textString.length;\n            closeIdx = openIdx;\n            fragments.push({\n                value: textString.substring(prevIdx, openIdx),\n                type: \"text\"\n            });\n        } else {\n            closeIdx = textString.indexOf(closeTag, openIdx) + closeTag.length;\n            fragments.push({\n                value: textString.substring(prevIdx, openIdx),\n                type: \"text\"\n            });\n            fragments.push({\n                value: textString.substring(openIdx, closeIdx),\n                type: tagName\n            });\n        }\n        prevIdx = closeIdx;\n    }\n    return fragments;\n}\nfunction $3a07be1bc7c23c7f$export$a6f905893761824c(text, lengthLimit = 1) {\n    return text !== undefined && text !== null && text.length !== undefined && text.length >= lengthLimit;\n}\nfunction $3a07be1bc7c23c7f$export$4aef7de70321e0b6(number) {\n    return number !== undefined && number !== null && !isNaN(number);\n}\nfunction $3a07be1bc7c23c7f$export$7d558e3702f02251(arr, lengthLimit = 1) {\n    return arr !== undefined && arr !== null && Array.isArray(arr) && arr.length !== undefined && arr.length >= lengthLimit;\n}\nfunction $3a07be1bc7c23c7f$export$4681d16351dbb61(obj, requiredProperties = 1) {\n    return obj !== undefined && obj !== null && typeof obj == \"object\" && Object.keys(obj).length >= requiredProperties;\n}\nasync function $3a07be1bc7c23c7f$export$36392f02fb7d020e(imageUrl) {\n    const response = await fetch(imageUrl);\n    if (!response.ok) return false;\n    const result = await response.blob();\n    return result.type.startsWith(\"image/\") ?? false;\n}\nfunction $3a07be1bc7c23c7f$export$77c7077e20982152(enableDarkMode) {\n    const toggleDark = document.querySelector(\"#darkmode-toggle-dark\");\n    const toggleLight = document.querySelector(\"#darkmode-toggle-light\");\n    if (enableDarkMode) {\n        document.body.classList.add(\"darkmode\");\n        if (toggleDark !== undefined && toggleDark !== null) toggleDark.checked = true;\n    } else {\n        document.body.classList.remove(\"darkmode\");\n        if (toggleLight !== undefined && toggleLight !== null) toggleLight.checked = true;\n    }\n}\nfunction $3a07be1bc7c23c7f$export$5d9f4b893001eb04() {\n    // Set default value depending on user darkmode system setting\n    $3a07be1bc7c23c7f$export$77c7077e20982152(window.matchMedia(\"(prefers-color-scheme: dark)\").matches);\n    // Change value if the user changes their darkmode system setting.\n    window.matchMedia(\"(prefers-color-scheme: dark)\").addEventListener(\"change\", (event)=>{\n        $3a07be1bc7c23c7f$export$77c7077e20982152(event.matches);\n    });\n}\nfunction $3a07be1bc7c23c7f$export$f3b8e31d958a9f24(errorText, showInPopup = false, autoCloseAfter = 15000, errorBoxIdentifier = \"#errors\") {\n    const errorBox = document.querySelector(errorBoxIdentifier);\n    const errorMsg = document.createElement(\"div\");\n    errorBox.classList.add(\"show\");\n    errorMsg.innerText = errorText;\n    errorBox.appendChild(errorMsg);\n    errorBox.scrollIntoView();\n    if (showInPopup) alert(errorText);\n    if (autoCloseAfter > 1000) setTimeout((errorMsg, errorBox)=>{\n        errorMsg.remove();\n        if (errorBox.children.length <= 0) errorBox.classList.remove(\"show\");\n    }, autoCloseAfter, errorMsg, errorBox);\n}\nfunction $3a07be1bc7c23c7f$export$68a589e25833f984(targetElement, classesToAdd) {\n    if (targetElement !== undefined && targetElement !== null) {\n        if (classesToAdd.length > 0) {\n            if (Array.isArray(classesToAdd)) targetElement.classList.add(...classesToAdd);\n            else if ($3a07be1bc7c23c7f$export$a6f905893761824c(classesToAdd)) targetElement.classList.add(classesToAdd);\n        }\n    }\n}\nfunction $3a07be1bc7c23c7f$export$ab2fe02786cfa43c(elementType, elementText, parentElement = null, elementClass = \"\", elementAttributes = null, allowHTML = false) {\n    let newElement = document.createElement(elementType);\n    elementType = elementType.toLowerCase();\n    // Set any attributes on the element\n    if ($3a07be1bc7c23c7f$export$4681d16351dbb61(elementAttributes, 1)) for(const attributeName in elementAttributes)newElement.setAttribute(attributeName, elementAttributes[attributeName]);\n    // Set CSS class(es) on the element\n    $3a07be1bc7c23c7f$export$68a589e25833f984(newElement, elementClass);\n    // If text content is an array, check if the type is a list or select tag\n    if ($3a07be1bc7c23c7f$export$7d558e3702f02251(elementText)) {\n        // If type is a list and text is an array, build list items\n        if (elementType == \"ul\" || elementType == \"ol\") for (const listItemText of elementText){\n            const newListItem = document.createElement(\"li\");\n            $3a07be1bc7c23c7f$export$375d3942de154e76(newListItem, listItemText, allowHTML);\n            newElement.appendChild(newListItem);\n        }\n        else if (elementType == \"select\" || elementType == \"datalist\") for (const optionItemText of elementText){\n            const [optValue, optLabel, optGroup] = optionItemText.split(\"|\");\n            const newOptionItem = document.createElement(\"option\");\n            $3a07be1bc7c23c7f$export$375d3942de154e76(newOptionItem, optLabel ?? optValue, allowHTML);\n            newOptionItem.value = optValue;\n            if (optGroup !== undefined) {\n                let optionGroup = newElement.querySelector(`optgroup[label=\"${optGroup}\"]`);\n                if (optionGroup === undefined || optionGroup === null) {\n                    optionGroup = document.createElement(\"optgroup\");\n                    optionGroup.label = optGroup;\n                    newElement.appendChild(optionGroup);\n                }\n                optionGroup.appendChild(newOptionItem);\n            } else newElement.appendChild(newOptionItem);\n        }\n        else $3a07be1bc7c23c7f$export$375d3942de154e76(newElement, elementText[0], allowHTML);\n    } else if ($3a07be1bc7c23c7f$export$a6f905893761824c(elementText, 1)) {\n        // Special case for images - set ALT attribute\n        if (elementType == \"img\") newElement.alt = elementText;\n        else if (elementType == \"input\" && elementText.length > 0) {\n            const actualNewElement = newElement;\n            const newElementLabel = document.createElement(\"label\");\n            newElement = document.createElement(\"div\");\n            newElement.id = `${actualNewElement.id}-wrapper`;\n            if (elementClass.length > 0) newElement.classList.add((Array.isArray(elementClass) ? elementClass[0] : elementClass) + \"-wrapper\");\n            newElementLabel.setAttribute(\"for\", actualNewElement.id);\n            $3a07be1bc7c23c7f$export$375d3942de154e76(newElementLabel, elementText, allowHTML);\n            if (actualNewElement.getAttribute(\"type\") == \"radio\" || actualNewElement.getAttribute(\"type\") == \"checkbox\") {\n                newElementLabel.classList.add(`input-box-label`);\n                newElement.append(actualNewElement, newElementLabel);\n            } else newElement.append(newElementLabel, actualNewElement);\n        } else $3a07be1bc7c23c7f$export$375d3942de154e76(newElement, elementText, allowHTML);\n    }\n    // Append to parent, if set\n    if (parentElement !== undefined && parentElement !== null) parentElement.appendChild(newElement);\n    return newElement;\n}\nfunction $3a07be1bc7c23c7f$export$375d3942de154e76(element, content, allowHTML) {\n    if (allowHTML) element.innerHTML = content;\n    else element.innerText = content;\n}\nfunction $3a07be1bc7c23c7f$export$a45229d174408848(elementType, elementText, parentElement, cssClass, attributes, allowHTML) {\n    let selector = \"\";\n    if ($3a07be1bc7c23c7f$export$4681d16351dbb61(attributes) && $3a07be1bc7c23c7f$export$a6f905893761824c(attributes.id)) selector = `#${attributes.id}`;\n    else if ($3a07be1bc7c23c7f$export$7d558e3702f02251(cssClass)) selector = `${elementType}.${cssClass.join(\".\")}`;\n    else if ($3a07be1bc7c23c7f$export$a6f905893761824c(cssClass)) selector = `${elementType}.${cssClass}`;\n    else selector = elementType;\n    let targetElement = parentElement.querySelector(selector);\n    if ($3a07be1bc7c23c7f$export$4681d16351dbb61(targetElement, 0)) {\n        if (elementType == \"ul\" || elementType == \"ol\") {\n            targetElement.innerHTML = \"\";\n            for (const listItemText of elementText){\n                const newListItem = document.createElement(\"li\");\n                $3a07be1bc7c23c7f$export$375d3942de154e76(newListItem, listItemText, allowHTML);\n                targetElement.appendChild(newListItem);\n            }\n        } else if (elementType == \"select\" || elementType == \"datalist\") {\n            targetElement.innerHTML = \"\";\n            for (const optionItemText of elementText){\n                const [optValue, optLabel, optGroup] = optionItemText.split(\"|\");\n                const newOptionItem = document.createElement(\"option\");\n                $3a07be1bc7c23c7f$export$375d3942de154e76(newOptionItem, optLabel ?? optValue, allowHTML);\n                newOptionItem.value = optValue;\n                if (optGroup !== undefined) {\n                    let optionGroup = targetElement.querySelector(`optgroup[label=\"${optGroup}\"]`);\n                    if (optionGroup === undefined || optionGroup === null) {\n                        optionGroup = document.createElement(\"optgroup\");\n                        optionGroup.label = optGroup;\n                        targetElement.appendChild(optionGroup);\n                    }\n                    optionGroup.appendChild(newOptionItem);\n                } else targetElement.appendChild(newOptionItem);\n            }\n        } else $3a07be1bc7c23c7f$export$375d3942de154e76(targetElement, elementText, allowHTML);\n    } else targetElement = $3a07be1bc7c23c7f$export$ab2fe02786cfa43c(elementType, elementText, parentElement, cssClass, attributes, allowHTML);\n    return targetElement;\n}\nfunction $3a07be1bc7c23c7f$export$41bf74dd1b2c1f00(formData) {\n    var dataObject = {};\n    if (formData instanceof FormData) formData.forEach((value, key)=>{\n        if (!(key in dataObject)) dataObject[key] = value;\n        else {\n            if (!Array.isArray(dataObject[key])) dataObject[key] = [\n                dataObject[key]\n            ];\n            dataObject[key].push(value);\n        }\n    });\n    return JSON.stringify(dataObject);\n}\nasync function $3a07be1bc7c23c7f$export$203ba4712400d2c6(url, formData) {\n    const options = {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: formData instanceof FormData ? $3a07be1bc7c23c7f$export$41bf74dd1b2c1f00(formData) : JSON.stringify(formData)\n    };\n    let response = await fetch(url, options);\n    if (!response.ok) throw new Error(`submitFormPostJson error: ${response.status} - ${response.statusText}`);\n    return await response.json();\n}\n\n\nclass $227a5282996e58c2$export$2e2bcd8739ae039 {\n    #urlBase;\n    #urlSuffix;\n    constructor(baseUrl, urlSuffix = \"\"){\n        this.#urlBase = baseUrl;\n        this.#urlSuffix = urlSuffix;\n    }\n    get url() {\n        return this.#urlBase;\n    }\n    //////////////////////////////////////////////////////////////////////////////////////////////////////\n    // Fetch data from remote source URL path in JSON format\n    async getJson(urlPath = \"\", queryParams = null) {\n        const url = this.#buildRequestUrl(urlPath, queryParams);\n        const response = await fetch(url);\n        let result = await response.json();\n        if (!response.ok) this.#handleResponseErrors(response, result);\n        return result;\n    }\n    //////////////////////////////////////////////////////////////////////////////////////////////////////\n    // Convert specified object to JSON and submit it to the specified URL using POST method. \n    async postJson(formData, urlPath = \"\", queryParams = null) {\n        const url = this.#buildRequestUrl(urlPath, queryParams);\n        const options = {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: formData instanceof FormData ? this.formdataToJson(formData) : JSON.stringify(formData)\n        };\n        let response = await fetch(url, options);\n        let result = await response.json();\n        if (!response.ok) this.#handleResponseErrors(response, result);\n        return result;\n    }\n    //////////////////////////////////////////////////////////////////////////////////////////////////////\n    // Convert specified object to JSON and submit it to the specified URL using POST method. \n    async updateJson(formData, urlPath = \"\", queryParams = null) {\n        const url = this.#buildRequestUrl(urlPath, queryParams);\n        const options = {\n            method: \"PATCH\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: formData instanceof FormData ? this.formdataToJson(formData) : JSON.stringify(formData)\n        };\n        let response = await fetch(url, options);\n        let result = await response.json();\n        if (!response.ok) this.#handleResponseErrors(response, result);\n        return result;\n    }\n    //////////////////////////////////////////////////////////////////////////////////////////////////////\n    // Remove data from remote source at the specified URL path\n    async deleteJson(formData, urlPath = \"\", queryParams = null) {\n        const url = this.#buildRequestUrl(urlPath, queryParams);\n        const options = {\n            method: \"DELETE\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: formData instanceof FormData ? this.formdataToJson(formData) : JSON.stringify(formData)\n        };\n        let response = await fetch(url, options);\n        let result = await response.json();\n        if (!response.ok) this.#handleResponseErrors(response, result);\n        return result;\n    }\n    //////////////////////////////////////////////////////////////////////////////////////////////////////\n    // Return a json-encoded object from a FormData object\n    formdataToJson(formData) {\n        var dataObject = {};\n        if (formData instanceof FormData) formData.forEach((value, key)=>{\n            // In case the remote api is type sensitive (like Firebase), convert numbers and booleans from FormData strings \n            let currValue = !isNaN(value) ? parseInt(value) : value;\n            currValue = currValue === \"true\" ? true : currValue === \"false\" ? false : currValue;\n            // Handle formdata with multiple value fields with the same name attribute (like select tags \n            //  with the \"multiple\" attribute, checkbox groups etc)\n            if (!(key in dataObject)) dataObject[key] = currValue;\n            else {\n                if (!Array.isArray(dataObject[key])) dataObject[key] = [\n                    dataObject[key]\n                ];\n                dataObject[key].push(currValue);\n            }\n        });\n        return JSON.stringify(dataObject);\n    }\n    //////////////////////////////////////////////////////////////////////////////////////////////////////\n    // Handle error responses from the API\n    #handleResponseErrors(response, result) {\n        if (response.status == 400) {\n            // Request data validation error - build a list of validation errors.\n            if (result.error && result.data && result.error == \"Validation error\") {\n                if (Array.isArray(result.data)) {\n                    let errorText = \"<ul>\";\n                    if (result.data.length) for (const errorMsg of result.data)errorText += `<li>${errorMsg.msg ?? \"No message\"}</li>`;\n                    else errorText += `<li>${result.error}</li>`;\n                    errorText += \"</ul>\";\n                    throw new $227a5282996e58c2$export$f2e832acab1bdd79(response.status, errorText);\n                }\n            } else throw new $227a5282996e58c2$export$f2e832acab1bdd79(response.status, `API Error: ${result.error ?? \"\"}  (${response.statusText})`);\n        } else if (response.status == 500) throw new $227a5282996e58c2$export$f2e832acab1bdd79(response.status, `API Error: ${result.error ?? \"\"}  (${response.statusText})`);\n        else throw new $227a5282996e58c2$export$f2e832acab1bdd79(response.status, `API Error: ${response.statusText}`);\n    }\n    //////////////////////////////////////////////////////////////////////////////////////////////////////\n    // Construct an URL to send requests to.\n    #buildRequestUrl(urlPath = \"\", queryParams = null) {\n        const url = new URL(`${this.#urlBase}${urlPath.length > 0 ? \"/\" + urlPath : \"\"}${this.#urlSuffix}`);\n        if (queryParams) for(const key in queryParams)url.searchParams.append(key, queryParams[key]);\n        return url;\n    }\n}\nclass $227a5282996e58c2$export$f2e832acab1bdd79 extends Error {\n    #errorCode;\n    constructor(errorCode, errorMessage){\n        super(errorMessage);\n        this.#errorCode = errorCode;\n    }\n    get errorCode() {\n        return this.#errorCode;\n    }\n}\n\n\n\nfunction $dc5f931bf6ee91fa$export$3879b24e8245693d(message) {\n    const errorBox = document.querySelector(\"#errors\");\n    errorBox.innerHTML = \"\";\n    $3a07be1bc7c23c7f$export$ab2fe02786cfa43c(\"h2\", \"Error\", errorBox);\n    $3a07be1bc7c23c7f$export$ab2fe02786cfa43c(\"div\", message, errorBox, \"error-box-message\", null, true);\n    $3a07be1bc7c23c7f$export$ab2fe02786cfa43c(\"button\", \"OK\", errorBox, \"error-close-button\").addEventListener(\"click\", (event)=>{\n        event.currentTarget.closest(\"dialog\").close();\n    });\n    errorBox.showModal();\n}\n\n\nconst $eee1d11aa096bfee$var$API_URL = \"http://localhost:3000/tasks\";\n// const API_URL = 'http://192.168.1.3:3000/tasks';\ndocument.querySelector(\"#debug\").addEventListener(\"click\", (event)=>{\n    const api = new (0, $227a5282996e58c2$export$2e2bcd8739ae039)($eee1d11aa096bfee$var$API_URL + \"/done\");\n    const taskFormData = new FormData();\n    // taskFormData.set(\"taskid\", \"5d2dac6c-5132-4234-9389-d08934d77a31\");\n    // taskFormData.set(\"taskid\", \"a107fad9-89be-48d4-8858-0baee295ead4\");\n    taskFormData.set(\"taskid\", \"task\");\n    api.updateJson(taskFormData).then((taskData)=>{\n        $eee1d11aa096bfee$export$12bee4b57621ceb();\n    }).catch((error)=>{\n        (0, $dc5f931bf6ee91fa$export$3879b24e8245693d)(error.message);\n    });\n});\nfunction $eee1d11aa096bfee$export$f08d315250e1aa23(taskFormData) {\n    const api = new (0, $227a5282996e58c2$export$2e2bcd8739ae039)($eee1d11aa096bfee$var$API_URL + \"/delete\");\n    api.deleteJson(taskFormData).then((taskData)=>{\n        $eee1d11aa096bfee$export$12bee4b57621ceb();\n    }).catch((error)=>{\n        (0, $dc5f931bf6ee91fa$export$3879b24e8245693d)(error.message);\n    });\n}\nfunction $eee1d11aa096bfee$export$bdadf32240c8542d(taskFormData) {\n    const api = new (0, $227a5282996e58c2$export$2e2bcd8739ae039)($eee1d11aa096bfee$var$API_URL + \"/done\");\n    api.updateJson(taskFormData).then((taskData)=>{\n        $eee1d11aa096bfee$export$12bee4b57621ceb();\n    }).catch((error)=>{\n        (0, $dc5f931bf6ee91fa$export$3879b24e8245693d)(error.message);\n    });\n}\nfunction $eee1d11aa096bfee$export$13ce2202561ee22c(taskFormData) {\n    const api = new (0, $227a5282996e58c2$export$2e2bcd8739ae039)($eee1d11aa096bfee$var$API_URL + \"/assign\");\n    api.updateJson(taskFormData).then((taskData)=>{\n        $eee1d11aa096bfee$export$12bee4b57621ceb();\n    }).catch((error)=>{\n        (0, $dc5f931bf6ee91fa$export$3879b24e8245693d)(error.message);\n    });\n}\nfunction $eee1d11aa096bfee$export$210cf76140947b0c(taskFormData) {\n    const api = new (0, $227a5282996e58c2$export$2e2bcd8739ae039)($eee1d11aa096bfee$var$API_URL + \"/add\");\n    api.postJson(taskFormData).then((taskData)=>{\n        $eee1d11aa096bfee$export$12bee4b57621ceb();\n    }).catch((error)=>{\n        (0, $dc5f931bf6ee91fa$export$3879b24e8245693d)(error.message);\n    });\n}\nfunction $eee1d11aa096bfee$export$12bee4b57621ceb() {\n    const api = new (0, $227a5282996e58c2$export$2e2bcd8739ae039)($eee1d11aa096bfee$var$API_URL + \"/list\");\n    api.getJson().then((taskData)=>{\n        const todoBox = document.querySelector(\"#tasks-todo-box\");\n        const wipBox = document.querySelector(\"#tasks-wip-box\");\n        const doneBox = document.querySelector(\"#tasks-done-box\");\n        todoBox.innerHTML = \"\";\n        wipBox.innerHTML = \"\";\n        doneBox.innerHTML = \"\";\n        for (const task of taskData){\n            const card = $eee1d11aa096bfee$export$cf04eaa0632e6ee5(task);\n            switch(task.state){\n                case \"todo\":\n                    todoBox.appendChild(card);\n                    break;\n                case \"wip\":\n                    wipBox.appendChild(card);\n                    break;\n                case \"done\":\n                    doneBox.appendChild(card);\n                    break;\n            }\n        }\n    }).catch((error)=>{\n        (0, $dc5f931bf6ee91fa$export$3879b24e8245693d)(error.message);\n    });\n}\nfunction $eee1d11aa096bfee$export$cf04eaa0632e6ee5(task) {\n    const card = $3a07be1bc7c23c7f$export$ab2fe02786cfa43c(\"article\", task.message, null, [\n        \"task-box\",\n        `color-${task.category}`\n    ], {\n        taskid: task.taskid\n    });\n    switch(task.state){\n        case \"todo\":\n            const assignForm = $3a07be1bc7c23c7f$export$ab2fe02786cfa43c(\"form\", \"\", card, \"task-assign-form\");\n            $3a07be1bc7c23c7f$export$ab2fe02786cfa43c(\"input\", \"\", assignForm, \"\", {\n                placeholder: \"Assign task to\",\n                type: \"text\",\n                name: \"assigned\",\n                \"min-length\": \"2\",\n                \"max-length\": \"20\",\n                required: \"true\"\n            });\n            $3a07be1bc7c23c7f$export$ab2fe02786cfa43c(\"button\", \"Assign\", assignForm);\n            assignForm.addEventListener(\"submit\", $eee1d11aa096bfee$var$onAssignTaskSubmit);\n            break;\n        case \"wip\":\n            $3a07be1bc7c23c7f$export$ab2fe02786cfa43c(\"div\", task.assigned, card, \"assigned-to\");\n            const doneButtonWrapper = $3a07be1bc7c23c7f$export$ab2fe02786cfa43c(\"div\", \"\", card, \"task-button-wrapper\");\n            $3a07be1bc7c23c7f$export$ab2fe02786cfa43c(\"button\", \"Done \\xbb\", doneButtonWrapper);\n            break;\n        case \"done\":\n            $3a07be1bc7c23c7f$export$ab2fe02786cfa43c(\"div\", task.assigned, card, \"assigned-to\");\n            const deleteButtonWrapper = $3a07be1bc7c23c7f$export$ab2fe02786cfa43c(\"div\", \"\", card, \"task-delete-wrapper\");\n            $3a07be1bc7c23c7f$export$ab2fe02786cfa43c(\"button\", \"X\", deleteButtonWrapper);\n            break;\n    }\n    return card;\n}\n////////////////////////////////////////////////////////////////////////////////////////////////\n// Submit handler: Assign someone to a task\nfunction $eee1d11aa096bfee$var$onAssignTaskSubmit(event) {\n    event.preventDefault();\n    const formData = new FormData(event.currentTarget);\n    formData.set(\"taskid\", event.submitter.closest(\"article\").getAttribute(\"taskid\"));\n    $eee1d11aa096bfee$export$13ce2202561ee22c(formData);\n}\n\n\n(0, $eee1d11aa096bfee$export$12bee4b57621ceb)();\n///////////////////////////////////////////////////////////////////////////////\n// Event handler: Done button on In Progress tasks\ndocument.querySelector(\"#tasks-wip-box\").addEventListener(\"submit\", (event)=>{\n    event.preventDefault();\n    const formData = new FormData();\n    formData.set(\"taskid\", event.submitter.closest(\"article\").getAttribute(\"taskid\"));\n    (0, $eee1d11aa096bfee$export$bdadf32240c8542d)(formData);\n});\n///////////////////////////////////////////////////////////////////////////////\n// Event handler: Delete button on Done tasks\ndocument.querySelector(\"#tasks-done-box\").addEventListener(\"submit\", (event)=>{\n    event.preventDefault();\n    if (confirm(\"Are you sure you wish to delete this task?\")) {\n        const formData = new FormData();\n        formData.set(\"taskid\", event.submitter.closest(\"article\").getAttribute(\"taskid\"));\n        (0, $eee1d11aa096bfee$export$f08d315250e1aa23)(formData);\n    }\n});\n///////////////////////////////////////////////////////////////////////////////\n// Event handler: add a new task\ndocument.querySelector(\"#new-task-form\").addEventListener(\"submit\", (event)=>{\n    event.preventDefault();\n    const formData = new FormData(event.currentTarget, event.submitter);\n    (0, $eee1d11aa096bfee$export$210cf76140947b0c)(formData);\n});\n\n\n//# sourceMappingURL=index.4a050cd4.js.map\n","import { showTasks, addNewTask, setTaskDone, deleteTask } from './modules/tasks.js';\r\n\r\n\r\nshowTasks();\r\n\r\n\r\n///////////////////////////////////////////////////////////////////////////////\r\n// Event handler: Done button on In Progress tasks\r\ndocument.querySelector(\"#tasks-wip-box\").addEventListener(\"submit\", (event) => {\r\n    event.preventDefault();\r\n\r\n    const formData = new FormData();\r\n    formData.set('taskid', event.submitter.closest(\"article\").getAttribute(\"taskid\"));\r\n    setTaskDone(formData);\r\n});\r\n\r\n\r\n///////////////////////////////////////////////////////////////////////////////\r\n// Event handler: Delete button on Done tasks\r\ndocument.querySelector(\"#tasks-done-box\").addEventListener(\"submit\", (event) => {\r\n    event.preventDefault();\r\n\r\n    if (confirm(\"Are you sure you wish to delete this task?\")) {\r\n        const formData = new FormData();\r\n        formData.set('taskid', event.submitter.closest(\"article\").getAttribute(\"taskid\"));\r\n        deleteTask(formData);\r\n    }\r\n});\r\n\r\n\r\n///////////////////////////////////////////////////////////////////////////////\r\n// Event handler: add a new task\r\ndocument.querySelector(\"#new-task-form\").addEventListener(\"submit\", (event) => {\r\n    event.preventDefault();\r\n    const formData = new FormData(event.currentTarget, event.submitter);\r\n    addNewTask(formData);\r\n});\r\n\r\n","import * as Utilities from './utilities.js';\r\nimport RestApi from './RestApi.js';\r\nimport { showError } from './interface.js';\r\n\r\nconst API_URL = 'http://localhost:3000/tasks';\r\n// const API_URL = 'http://192.168.1.3:3000/tasks';\r\n\r\n\r\ndocument.querySelector(\"#debug\").addEventListener(\"click\", (event) => {\r\n    const api = new RestApi(API_URL + '/done');\r\n    const taskFormData = new FormData();\r\n    // taskFormData.set(\"taskid\", \"5d2dac6c-5132-4234-9389-d08934d77a31\");\r\n    // taskFormData.set(\"taskid\", \"a107fad9-89be-48d4-8858-0baee295ead4\");\r\n    taskFormData.set(\"taskid\", \"task\");\r\n\r\n\r\n\r\n    api.updateJson(taskFormData).then((taskData) => {\r\n        showTasks();\r\n    }).catch((error) => {\r\n        showError(error.message);\r\n    });\r\n});\r\n\r\n\r\n\r\n////////////////////////////////////////////////////////////////////////////////////////////////\r\n// Remove a task from the board\r\nexport function deleteTask(taskFormData) {\r\n    const api = new RestApi(API_URL + '/delete');\r\n\r\n    api.deleteJson(taskFormData).then((taskData) => {\r\n        showTasks();\r\n    }).catch((error) => {\r\n        showError(error.message);\r\n    });\r\n}\r\n\r\n\r\n////////////////////////////////////////////////////////////////////////////////////////////////\r\n// Move a task to the Done column\r\nexport function setTaskDone(taskFormData) {\r\n    const api = new RestApi(API_URL + '/done');\r\n\r\n    api.updateJson(taskFormData).then((taskData) => {\r\n        showTasks();\r\n    }).catch((error) => {\r\n        showError(error.message);\r\n    });\r\n}\r\n\r\n////////////////////////////////////////////////////////////////////////////////////////////////\r\n// Set an assigned name and move task to the In Progress column\r\nexport function assignTask(taskFormData) {\r\n    const api = new RestApi(API_URL + '/assign');\r\n\r\n    api.updateJson(taskFormData).then((taskData) => {\r\n        showTasks();\r\n    }).catch((error) => {\r\n        showError(error.message);\r\n    });\r\n}\r\n\r\n////////////////////////////////////////////////////////////////////////////////////////////////\r\n// Add a new task to the ToDo column\r\nexport function addNewTask(taskFormData) {\r\n    const api = new RestApi(API_URL + '/add');\r\n\r\n    api.postJson(taskFormData).then((taskData) => {\r\n        showTasks();\r\n    }).catch((error) => {\r\n        showError(error.message);\r\n    });\r\n}\r\n\r\n\r\n////////////////////////////////////////////////////////////////////////////////////////////////\r\n// Display all tasks on the page\r\nexport function showTasks() {\r\n    const api = new RestApi(API_URL + '/list');\r\n    api.getJson().then((taskData) => {\r\n        const todoBox = document.querySelector(\"#tasks-todo-box\");\r\n        const wipBox = document.querySelector(\"#tasks-wip-box\");\r\n        const doneBox = document.querySelector(\"#tasks-done-box\");\r\n        todoBox.innerHTML = \"\";\r\n        wipBox.innerHTML = \"\";\r\n        doneBox.innerHTML = \"\";\r\n\r\n        for (const task of taskData) {\r\n            const card = createTaskCard(task);\r\n            switch (task.state) {\r\n                case \"todo\": todoBox.appendChild(card); break;\r\n                case \"wip\": wipBox.appendChild(card); break;\r\n                case \"done\": doneBox.appendChild(card); break;\r\n            }\r\n        }\r\n    }).catch((error) => {\r\n        showError(error.message);\r\n    });\r\n}\r\n\r\n////////////////////////////////////////////////////////////////////////////////////////////////\r\n// Create a card/box to display a task, depending on task state\r\nexport function createTaskCard(task) {\r\n    const card = Utilities.createHTMLElement('article', task.message, null, ['task-box', `color-${task.category}`], { taskid: task.taskid });\r\n    switch (task.state) {\r\n        case \"todo\":\r\n            const assignForm = Utilities.createHTMLElement('form', '', card, 'task-assign-form');\r\n            Utilities.createHTMLElement('input', '', assignForm, '', { placeholder: \"Assign task to\", type: \"text\", name: \"assigned\", \"min-length\": \"2\", \"max-length\": \"20\", required: \"true\" });\r\n            Utilities.createHTMLElement('button', 'Assign', assignForm);\r\n            assignForm.addEventListener(\"submit\", onAssignTaskSubmit);\r\n            break;\r\n        case \"wip\":\r\n            Utilities.createHTMLElement('div', task.assigned, card, 'assigned-to');\r\n            const doneButtonWrapper = Utilities.createHTMLElement('div', '', card, 'task-button-wrapper');\r\n            Utilities.createHTMLElement('button', 'Done »', doneButtonWrapper);\r\n            break;\r\n        case \"done\":\r\n            Utilities.createHTMLElement('div', task.assigned, card, 'assigned-to');\r\n            const deleteButtonWrapper = Utilities.createHTMLElement('div', '', card, 'task-delete-wrapper');\r\n            Utilities.createHTMLElement('button', 'X', deleteButtonWrapper);\r\n            break;\r\n    }\r\n    return card;\r\n}\r\n\r\n\r\n////////////////////////////////////////////////////////////////////////////////////////////////\r\n// Submit handler: Assign someone to a task\r\nfunction onAssignTaskSubmit(event) {\r\n    event.preventDefault();\r\n    const formData = new FormData(event.currentTarget);\r\n    formData.set('taskid', event.submitter.closest(\"article\").getAttribute(\"taskid\"));\r\n    assignTask(formData);\r\n};\r\n","/*\r\n    General utility functions\r\n    Collection of any functions I create that may be useful stand-alone for other projects. \r\n\t\r\n    By Kristoffer Bengtsson\r\n*/\r\n\r\n\r\n//////////////////////////////////////////////////////////////////////////////////////////////////////\r\n// Set an event listener on the element(s) matching the targetIdentifier selector, if any exist.\r\n// Return an array with all matching elements. \r\nexport function setEventListener(targetSelector, eventType, eventCallback) {\r\n    const eventTargets = document.querySelectorAll(targetSelector);\r\n    const targetElements = [];\r\n    if ((eventTargets !== undefined) && (eventTargets !== null)) {\r\n        eventTargets.forEach((eventTarget) => {\r\n            eventTarget.addEventListener(eventType, eventCallback);\r\n            targetElements.push(eventTarget);\r\n        });\r\n    }\r\n    return targetElements;\r\n}\r\n\r\n\r\n///////////////////////////////////////////////////////////////////////////////////////////\r\n// Convert a timestamp number to a displayable date string using the formatting of the\r\n// specified language locale (e.g. 'sv-SE', 'en-US' etc), or the browser language \r\n// if none is specified. \r\nexport function timestampToDateTime(timestamp, isMilliSeconds = true, locale = null) {\r\n    const dateObj = new Date(isMilliSeconds ? timestamp : timestamp * 1000);\r\n    const formatLocale = (locale ?? navigator.language);\r\n    const formatOptions = {\r\n        year: \"numeric\",\r\n        month: \"numeric\",\r\n        day: \"numeric\",\r\n        hour: \"numeric\",\r\n        minute: \"numeric\",\r\n        second: \"numeric\"\r\n    };\r\n\r\n    return new Intl.DateTimeFormat(formatLocale, formatOptions).format(dateObj);\r\n    // return `${dateObj.toLocaleDateString(formatLocale)} ${dateObj.toLocaleTimeString(formatLocale)}`;\r\n}\r\n\r\n\r\n//////////////////////////////////////////////////////////////////////////////////////////////////////\r\n// Return a string cropped down to a maximum number of characters. The function will cut off the\r\n// string at the closest space character before the max-length to avoid cutting in the middle of words.\r\nexport function getTruncatedString(truncText, maxLength) {\r\n    if (maxLength < truncText.length) {\r\n        let cutOffLength = truncText.lastIndexOf(\" \", maxLength);\r\n        if (cutOffLength < 1) {\r\n            cutOffLength = maxLength;\r\n        }\r\n        truncText = truncText.slice(0, cutOffLength) + \"…\";\r\n    }\r\n    return truncText;\r\n}\r\n\r\n\r\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n// Set the content of an element to a string that may only contain whitelisted HTML elements\r\n// contentString = string with the content to assign to the element\r\n// contentElement = the HTML element to assign the content to\r\n// allowedTags = array with the names of tags that are allowed to be used in the content (i.e. ['strong', 'em'])\r\n// allowedAttributes = array with the names of attributes that may be used on allowed tags in the content\r\nexport function setContentWithTagFilter(contentString, contentElement, allowedTags = null, allowedAttributes = null) {\r\n    const tempElement = document.createElement(\"template\");\r\n    tempElement.innerHTML = contentString;\r\n\r\n    if ((contentElement === undefined) || (contentElement === null)) {\r\n        contentElement = document.createElement(\"div\");\r\n    }\r\n\r\n    if ((allowedTags === undefined) || (allowedTags === null) || (allowedTags.length < 1)) {\r\n        allowedTags = ['strong', 'em', 'b', 'i', 'a', 'blockquote'];\r\n    }\r\n    if ((allowedAttributes === undefined) || (allowedAttributes === null) || (allowedAttributes.length < 1)) {\r\n        allowedAttributes = ['href', 'src', 'alt', 'class', 'id', 'target'];\r\n    }\r\n\r\n    allowedTags = allowedTags.map((elem) => elem.toUpperCase());\r\n    allowedAttributes = allowedAttributes.map((elem) => elem.toLowerCase());\r\n\r\n    copyContentWithFilteredTags(tempElement.content, contentElement, allowedTags, allowedAttributes);\r\n    return contentElement;\r\n}\r\n\r\n\r\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n// Helper function for setContentWithFilteredTags(), step through the baseElement and copy allowed child elements\r\n// to the target element and add the rest as text. \r\nfunction copyContentWithFilteredTags(baseElement, copyElement, allowedTags, allowedAttributes) {\r\n    if (baseElement.childNodes.length > 0) {\r\n        baseElement.childNodes.forEach((checkChild) => {\r\n            if (checkChild.nodeType == Node.ELEMENT_NODE) {\r\n                let currElement;\r\n                if (allowedTags.includes(checkChild.tagName)) {\r\n                    currElement = document.createElement(checkChild.tagName);\r\n                    for (const attrib of checkChild.attributes) {\r\n                        if (allowedAttributes.includes(attrib.name)) {\r\n                            currElement.setAttribute(attrib.name, attrib.value);\r\n                        }\r\n                    }\r\n                    copyElement.appendChild(currElement);\r\n                }\r\n                else {\r\n                    currElement = copyElement;\r\n                }\r\n                copyContentWithFilteredTags(checkChild, currElement, allowedTags, allowedAttributes);\r\n            }\r\n            else if (checkChild.nodeType == Node.TEXT_NODE) {\r\n                const currElement = document.createTextNode(checkChild.textContent);\r\n                copyElement.appendChild(currElement);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n\r\n///////////////////////////////////////////////////////////////////////////////////////////\r\n// Split up a string into the specified tag, and everything else, returned as an array.\r\n// I.e:\r\n// const chunks = splitStringByTag(myString, '<a class=\"text-link\" ', '</a>')\r\n// ... would return an array where links starting with '<a class=\"text-link' and are closed by\r\n// '</a>' are split out from the rest of the text. \r\nexport function splitStringByTag(textString, openTag, closeTag, tagName = 'tag') {\r\n    const fragments = [];\r\n\r\n    let openIdx = 0;\r\n    let closeIdx = 0;\r\n    let prevIdx = 0;\r\n    while (prevIdx < textString.length) {\r\n        openIdx = textString.indexOf(openTag, closeIdx);\r\n\r\n        if (openIdx == -1) {\r\n            openIdx = textString.length;\r\n            closeIdx = openIdx;\r\n            fragments.push({ value: textString.substring(prevIdx, openIdx), type: \"text\" });\r\n        }\r\n        else {\r\n            closeIdx = textString.indexOf(closeTag, openIdx) + closeTag.length;\r\n            fragments.push({ value: textString.substring(prevIdx, openIdx), type: \"text\" });\r\n            fragments.push({ value: textString.substring(openIdx, closeIdx), type: tagName });\r\n        }\r\n\r\n        prevIdx = closeIdx;\r\n    }\r\n\r\n    return fragments;\r\n}\r\n\r\n\r\n///////////////////////////////////////////////////////////////////////////////////////////\r\n// Utility to determine if a text variable has been set and assigned a value.\r\nexport function getIsValidText(text, lengthLimit = 1) {\r\n    return ((text !== undefined) && (text !== null) && (text.length !== undefined) && (text.length >= lengthLimit));\r\n}\r\n\r\n\r\n//////////////////////////////////////////////////////////////////////////////////////////////////////\r\n// Kontrollera om angiven parameter är ett giltigt nummer\r\nexport function getIsValidNumber(number) {\r\n    return (number !== undefined) && (number !== null) && !isNaN(number);\r\n}\r\n\r\n\r\n///////////////////////////////////////////////////////////////////////////////////////////\r\n// Utility to determine if a variable is an array with content\r\nexport function getIsValidArray(arr, lengthLimit = 1) {\r\n    return ((arr !== undefined) && (arr !== null) && (Array.isArray(arr)) && (arr.length !== undefined) && (arr.length >= lengthLimit));\r\n}\r\n\r\n\r\n///////////////////////////////////////////////////////////////////////////////////////////\r\n//  Utility to determine if a variable is an object with properties set\r\nexport function getIsValidObject(obj, requiredProperties = 1) {\r\n    return ((obj !== undefined) && (obj !== null) && (typeof obj == \"object\") && (Object.keys(obj).length >= requiredProperties));\r\n}\r\n\r\n\r\n///////////////////////////////////////////////////////////////////////////////////////////\r\n// Attempt to determine if the specified URL points toward an image depending on its MIME type\r\n// Returns a promise resolving to a boolean value indicating if the URL points to an image. \r\nexport async function getUrlIsImage(imageUrl) {\r\n    const response = await fetch(imageUrl);\r\n\r\n    if (!response.ok) {\r\n        return false;\r\n    }\r\n\r\n    const result = await response.blob();\r\n    return result.type.startsWith('image/') ?? false;\r\n}\r\n\r\n\r\n//////////////////////////////////////////////////////////////////////////////////////////////////////\r\n// Toggle page Dark Mode on and off\r\nexport function toggleDarkMode(enableDarkMode) {\r\n    const toggleDark = document.querySelector(\"#darkmode-toggle-dark\");\r\n    const toggleLight = document.querySelector(\"#darkmode-toggle-light\");\r\n\r\n    if (enableDarkMode) {\r\n        document.body.classList.add(\"darkmode\");\r\n        if ((toggleDark !== undefined) && (toggleDark !== null)) {\r\n            toggleDark.checked = true;\r\n        }\r\n\r\n    }\r\n    else {\r\n        document.body.classList.remove(\"darkmode\");\r\n        if ((toggleLight !== undefined) && (toggleLight !== null)) {\r\n            toggleLight.checked = true;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n//////////////////////////////////////////////////////////////////////////////////////////////////////\r\n// Set page Dark mode depending on the user's system darkmode setting\r\nexport function setDarkmodeBySystemSetting() {\r\n    // Set default value depending on user darkmode system setting\r\n    toggleDarkMode(window.matchMedia('(prefers-color-scheme: dark)').matches);\r\n\r\n    // Change value if the user changes their darkmode system setting.\r\n    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (event) => {\r\n        toggleDarkMode(event.matches);\r\n    });\r\n}\r\n\r\n\r\n///////////////////////////////////////////////////////////////////////////////////////////\r\n// Show an error message to the user. If the autoCloseAfter parameter is set to a number\r\n// of milliseconds the error message will automatically close after that amount of time.\r\n// If showInPopup is set to true the error will also be shown in an alert box. \r\nexport function showErrorMessage(errorText, showInPopup = false, autoCloseAfter = 15000, errorBoxIdentifier = '#errors') {\r\n    const errorBox = document.querySelector(errorBoxIdentifier);\r\n    const errorMsg = document.createElement(\"div\");\r\n\r\n    errorBox.classList.add(\"show\");\r\n    errorMsg.innerText = errorText;\r\n    errorBox.appendChild(errorMsg);\r\n    errorBox.scrollIntoView();\r\n\r\n    if (showInPopup) {\r\n        alert(errorText);\r\n    }\r\n\r\n    if (autoCloseAfter > 1000) {\r\n        setTimeout((errorMsg, errorBox) => {\r\n            errorMsg.remove();\r\n            if (errorBox.children.length <= 0) {\r\n                errorBox.classList.remove(\"show\");\r\n            }\r\n        }, autoCloseAfter, errorMsg, errorBox);\r\n    }\r\n}\r\n\r\n\r\n//////////////////////////////////////////////////////////////////////////////////////////////////////\r\n// Add CSS class(es) to a DOM element\r\nexport function addClassToElement(targetElement, classesToAdd) {\r\n    if ((targetElement !== undefined) && (targetElement !== null)) {\r\n        if (classesToAdd.length > 0) {\r\n            if (Array.isArray(classesToAdd)) {\r\n                targetElement.classList.add(...classesToAdd);\r\n            }\r\n            else if (getIsValidText(classesToAdd)) {\r\n                targetElement.classList.add(classesToAdd);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\n//////////////////////////////////////////////////////////////////////////////////////////////////////\r\n// Oneliner to create and return a new DOM element with content, optionally appending it to a parent element.\r\n//  * elementText can either be a string holding the content of the tag or the ALT of an img tag, or an array of strings \r\n//    containing the listitems/options for UL, OL, SELECT and DATALIST tags. In the case of SELECT/DATALIST the strings \r\n//    can also be formated like: SELECT: value|textlabel|optgroup      DATALIST: value|textlabel\r\n//  * elementClass can be a string or an array of strings holding CSS class(es) to apply to the element. \r\n//  * The elementAttributes parameter can be an object with a property for each attribute to set on the HTML element. \r\n// Function returns the newly created DOM element (or wrapper element if a wrapper is created).\r\n// Remember: Set CSS \"white-space: pre-wrap;\" on element if allowHTML is true and newlines still should displayed like with innerText. \r\nexport function createHTMLElement(elementType, elementText, parentElement = null, elementClass = '', elementAttributes = null, allowHTML = false) {\r\n    let newElement = document.createElement(elementType);\r\n\r\n    elementType = elementType.toLowerCase();\r\n\r\n    // Set any attributes on the element\r\n    if (getIsValidObject(elementAttributes, 1)) {\r\n        for (const attributeName in elementAttributes) {\r\n            newElement.setAttribute(attributeName, elementAttributes[attributeName]);\r\n        }\r\n    }\r\n\r\n    // Set CSS class(es) on the element\r\n    addClassToElement(newElement, elementClass);\r\n\r\n    // If text content is an array, check if the type is a list or select tag\r\n    if (getIsValidArray(elementText)) {\r\n        // If type is a list and text is an array, build list items\r\n        if ((elementType == 'ul') || (elementType == 'ol')) {\r\n            for (const listItemText of elementText) {\r\n                const newListItem = document.createElement(\"li\");\r\n                setElementContent(newListItem, listItemText, allowHTML);\r\n                newElement.appendChild(newListItem);\r\n            }\r\n        }\r\n        // If type is a select form element and text is an array, build select option list\r\n        else if ((elementType == 'select') || (elementType == 'datalist')) {\r\n            for (const optionItemText of elementText) {\r\n                const [optValue, optLabel, optGroup] = optionItemText.split('|');\r\n                const newOptionItem = document.createElement(\"option\");\r\n\r\n                setElementContent(newOptionItem, (optLabel ?? optValue), allowHTML);\r\n                newOptionItem.value = optValue;\r\n\r\n                if (optGroup !== undefined) {\r\n                    let optionGroup = newElement.querySelector(`optgroup[label=\"${optGroup}\"]`);\r\n                    if ((optionGroup === undefined) || (optionGroup === null)) {\r\n                        optionGroup = document.createElement(\"optgroup\");\r\n                        optionGroup.label = optGroup;\r\n                        newElement.appendChild(optionGroup);\r\n                    }\r\n                    optionGroup.appendChild(newOptionItem);\r\n                }\r\n                else {\r\n                    newElement.appendChild(newOptionItem);\r\n                }\r\n            }\r\n        }\r\n        // Not a list-type element, just use the first string \r\n        else {\r\n            setElementContent(newElement, elementText[0], allowHTML);\r\n        }\r\n    }\r\n    else if (getIsValidText(elementText, 1)) {\r\n        // Special case for images - set ALT attribute\r\n        if (elementType == 'img') {\r\n            newElement.alt = elementText;\r\n        }\r\n        // Special case for input fields, create labels\r\n        else if ((elementType == 'input') && (elementText.length > 0)) {\r\n            const actualNewElement = newElement;\r\n            const newElementLabel = document.createElement(\"label\");\r\n            newElement = document.createElement(\"div\");\r\n            newElement.id = `${actualNewElement.id}-wrapper`;\r\n            if (elementClass.length > 0) {\r\n                newElement.classList.add((Array.isArray(elementClass) ? elementClass[0] : elementClass) + \"-wrapper\");\r\n            }\r\n\r\n            newElementLabel.setAttribute(\"for\", actualNewElement.id);\r\n            setElementContent(newElementLabel, elementText, allowHTML);\r\n\r\n            if ((actualNewElement.getAttribute(\"type\") == \"radio\") || (actualNewElement.getAttribute(\"type\") == \"checkbox\")) {\r\n                newElementLabel.classList.add(`input-box-label`);\r\n                newElement.append(actualNewElement, newElementLabel);\r\n            }\r\n            else {\r\n                newElement.append(newElementLabel, actualNewElement);\r\n            }\r\n\r\n        }\r\n        // Everything else, set the text content\r\n        else {\r\n            setElementContent(newElement, elementText, allowHTML);\r\n        }\r\n    }\r\n\r\n    // Append to parent, if set\r\n    if ((parentElement !== undefined) && (parentElement !== null)) {\r\n        parentElement.appendChild(newElement);\r\n    }\r\n    return newElement;\r\n}\r\n\r\n\r\n//////////////////////////////////////////////////////////////////////////////////////////////////////\r\n// Sets the content of an element as text or HTML depending on the allowHTML parameter. \r\nexport function setElementContent(element, content, allowHTML) {\r\n    if (allowHTML) {\r\n        element.innerHTML = content;\r\n    }\r\n    else {\r\n        element.innerText = content;\r\n    }\r\n}\r\n\r\n//////////////////////////////////////////////////////////////////////////////////////////////////////\r\n// Set content of the matching HTML element if it exists, otherwise create it. \r\nexport function setHTMLElement(elementType, elementText, parentElement, cssClass, attributes, allowHTML) {\r\n    let selector = '';\r\n    if ((getIsValidObject(attributes) && getIsValidText(attributes.id))) {\r\n        selector = `#${attributes.id}`;\r\n    }\r\n    else if (getIsValidArray(cssClass)) {\r\n        selector = `${elementType}.${cssClass.join(\".\")}`;\r\n    }\r\n    else if (getIsValidText(cssClass)) {\r\n        selector = `${elementType}.${cssClass}`;\r\n    }\r\n    else {\r\n        selector = elementType;\r\n    }\r\n\r\n    let targetElement = parentElement.querySelector(selector);\r\n    if (getIsValidObject(targetElement, 0)) {\r\n        if ((elementType == 'ul') || (elementType == 'ol')) {\r\n            targetElement.innerHTML = '';\r\n            for (const listItemText of elementText) {\r\n                const newListItem = document.createElement(\"li\");\r\n                setElementContent(newListItem, listItemText, allowHTML);\r\n                targetElement.appendChild(newListItem);\r\n            }\r\n        }\r\n        else if ((elementType == 'select') || (elementType == 'datalist')) {\r\n            targetElement.innerHTML = '';\r\n            for (const optionItemText of elementText) {\r\n                const [optValue, optLabel, optGroup] = optionItemText.split('|');\r\n                const newOptionItem = document.createElement(\"option\");\r\n\r\n                setElementContent(newOptionItem, (optLabel ?? optValue), allowHTML);\r\n                newOptionItem.value = optValue;\r\n\r\n                if (optGroup !== undefined) {\r\n                    let optionGroup = targetElement.querySelector(`optgroup[label=\"${optGroup}\"]`);\r\n                    if ((optionGroup === undefined) || (optionGroup === null)) {\r\n                        optionGroup = document.createElement(\"optgroup\");\r\n                        optionGroup.label = optGroup;\r\n                        targetElement.appendChild(optionGroup);\r\n                    }\r\n                    optionGroup.appendChild(newOptionItem);\r\n                }\r\n                else {\r\n                    targetElement.appendChild(newOptionItem);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            setElementContent(targetElement, elementText, allowHTML);\r\n        }\r\n    }\r\n    else {\r\n        targetElement = createHTMLElement(elementType, elementText, parentElement, cssClass, attributes, allowHTML);\r\n    }\r\n\r\n    return targetElement;\r\n}\r\n\r\n\r\n//////////////////////////////////////////////////////////////////////////////////////////////////////\r\n// Turn a FormData object into a json-encoded object (with multi-select and checkbox-group support)\r\nexport function formdataToJson(formData) {\r\n    var dataObject = {};\r\n\r\n    if (formData instanceof FormData) {\r\n        formData.forEach((value, key) => {\r\n            if (!(key in dataObject)) {\r\n                dataObject[key] = value;\r\n            }\r\n            else {\r\n                if (!Array.isArray(dataObject[key])) {\r\n                    dataObject[key] = [dataObject[key]];\r\n                }\r\n                dataObject[key].push(value);\r\n            }\r\n        });\r\n    }\r\n\r\n    return JSON.stringify(dataObject);\r\n}\r\n\r\n\r\n//////////////////////////////////////////////////////////////////////////////////////////////////////\r\n// Convert specified FormData object to JSON and submit it to the specified URL using POST method. \r\nexport async function submitFormPostJson(url, formData) {\r\n    const options = {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: (formData instanceof FormData ? formdataToJson(formData) : JSON.stringify(formData)),\r\n    };\r\n\r\n    let response = await fetch(url, options);\r\n    if (!response.ok)\r\n        throw new Error(`submitFormPostJson error: ${response.status} - ${response.statusText}`);\r\n\r\n    return await response.json();\r\n}","\r\nexport default class RestApi {\r\n    #urlBase;\r\n    #urlSuffix;\r\n\r\n    constructor(baseUrl, urlSuffix = \"\") {\r\n        this.#urlBase = baseUrl;\r\n        this.#urlSuffix = urlSuffix;\r\n    }\r\n\r\n    get url() {\r\n        return this.#urlBase;\r\n    }\r\n\r\n\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Fetch data from remote source URL path in JSON format\r\n    async getJson(urlPath = '', queryParams = null) {\r\n        const url = this.#buildRequestUrl(urlPath, queryParams);\r\n        const response = await fetch(url);\r\n        let result = await response.json();\r\n        if (!response.ok) {\r\n            this.#handleResponseErrors(response, result);\r\n        }\r\n        return result;\r\n    }\r\n\r\n\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Convert specified object to JSON and submit it to the specified URL using POST method. \r\n    async postJson(formData, urlPath = '', queryParams = null) {\r\n        const url = this.#buildRequestUrl(urlPath, queryParams);\r\n        const options = {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: (formData instanceof FormData ? this.formdataToJson(formData) : JSON.stringify(formData)),\r\n        };\r\n\r\n        let response = await fetch(url, options);\r\n        let result = await response.json();\r\n        if (!response.ok) {\r\n            this.#handleResponseErrors(response, result);\r\n        }\r\n        return result;\r\n    }\r\n\r\n\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Convert specified object to JSON and submit it to the specified URL using POST method. \r\n    async updateJson(formData, urlPath = '', queryParams = null) {\r\n        const url = this.#buildRequestUrl(urlPath, queryParams);\r\n        const options = {\r\n            method: \"PATCH\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: (formData instanceof FormData ? this.formdataToJson(formData) : JSON.stringify(formData)),\r\n        };\r\n\r\n        let response = await fetch(url, options);\r\n        let result = await response.json();\r\n        if (!response.ok) {\r\n            this.#handleResponseErrors(response, result);\r\n        }\r\n        return result;\r\n    }\r\n\r\n\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Remove data from remote source at the specified URL path\r\n    async deleteJson(formData, urlPath = '', queryParams = null) {\r\n        const url = this.#buildRequestUrl(urlPath, queryParams);\r\n        const options = {\r\n            method: \"DELETE\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: (formData instanceof FormData ? this.formdataToJson(formData) : JSON.stringify(formData)),\r\n        };\r\n\r\n        let response = await fetch(url, options);\r\n        let result = await response.json();\r\n        if (!response.ok) {\r\n            this.#handleResponseErrors(response, result);\r\n        }\r\n        return result;\r\n    }\r\n\r\n\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Return a json-encoded object from a FormData object\r\n    formdataToJson(formData) {\r\n        var dataObject = {};\r\n        if (formData instanceof FormData) {\r\n            formData.forEach((value, key) => {\r\n                // In case the remote api is type sensitive (like Firebase), convert numbers and booleans from FormData strings \r\n                let currValue = (!isNaN(value) ? parseInt(value) : value);\r\n                currValue = (currValue === \"true\" ? true : (currValue === \"false\" ? false : currValue));\r\n\r\n                // Handle formdata with multiple value fields with the same name attribute (like select tags \r\n                //  with the \"multiple\" attribute, checkbox groups etc)\r\n                if (!(key in dataObject)) {\r\n                    dataObject[key] = currValue;\r\n                }\r\n                else {\r\n                    if (!Array.isArray(dataObject[key])) {\r\n                        dataObject[key] = [dataObject[key]];\r\n                    }\r\n                    dataObject[key].push(currValue);\r\n                }\r\n            });\r\n        }\r\n        return JSON.stringify(dataObject);\r\n    }\r\n\r\n\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Handle error responses from the API\r\n    #handleResponseErrors(response, result) {\r\n        if ((response.status == 400)) {\r\n            // Request data validation error - build a list of validation errors.\r\n            if (result.error && result.data && (result.error == \"Validation error\")) {\r\n                if (Array.isArray(result.data)) {\r\n                    let errorText = \"<ul>\";\r\n                    if (result.data.length) {\r\n                        for (const errorMsg of result.data) {\r\n                            errorText += `<li>${errorMsg.msg ?? \"No message\"}</li>`;\r\n                        }\r\n                    }\r\n                    else {\r\n                        errorText += `<li>${result.error}</li>`;\r\n                    }\r\n                    errorText += \"</ul>\";\r\n                    throw new ApiError(response.status, errorText);\r\n                }\r\n            }\r\n            // Other type of bad request - show error message from API\r\n            else {\r\n                throw new ApiError(response.status, `API Error: ${result.error ?? \"\"}  (${response.statusText})`);\r\n            }\r\n        }\r\n        // Server errors - show error message from API\r\n        else if (response.status == 500) {\r\n            throw new ApiError(response.status, `API Error: ${result.error ?? \"\"}  (${response.statusText})`);\r\n        }\r\n        // Other errors\r\n        else {\r\n            throw new ApiError(response.status, `API Error: ${response.statusText}`);\r\n        }\r\n    }\r\n\r\n\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Construct an URL to send requests to.\r\n    #buildRequestUrl(urlPath = '', queryParams = null) {\r\n        const url = new URL(`${this.#urlBase}${urlPath.length > 0 ? \"/\" + urlPath : \"\"}${this.#urlSuffix}`);\r\n        if (queryParams) {\r\n            for (const key in queryParams) {\r\n                url.searchParams.append(key, queryParams[key]);\r\n            }\r\n        }\r\n        return url;\r\n    }\r\n}\r\n\r\n\r\n// Exception class for keeping response/error codes separate from the message text.\r\nexport class ApiError extends Error {\r\n    #errorCode;\r\n\r\n    constructor(errorCode, errorMessage) {\r\n        super(errorMessage);\r\n        this.#errorCode = errorCode;\r\n    }\r\n\r\n    get errorCode() {\r\n        return this.#errorCode;\r\n    }\r\n}","import * as Utilities from './utilities.js';\r\n\r\nexport function showError(message) {\r\n    const errorBox = document.querySelector(\"#errors\");\r\n    errorBox.innerHTML = \"\";\r\n\r\n    Utilities.createHTMLElement('h2', 'Error', errorBox);\r\n    Utilities.createHTMLElement('div', message, errorBox, 'error-box-message', null, true);\r\n\r\n    Utilities.createHTMLElement('button', 'OK', errorBox, 'error-close-button').addEventListener(\"click\", (event) => {\r\n        event.currentTarget.closest('dialog').close();\r\n    });\r\n\r\n    errorBox.showModal();\r\n}"],"names":["$3a07be1bc7c23c7f$export$a6f905893761824c","text","lengthLimit","undefined","length","$3a07be1bc7c23c7f$export$ab2fe02786cfa43c","elementType","elementText","parentElement","elementClass","elementAttributes","allowHTML","targetElement","newElement","document","createElement","toLowerCase","$3a07be1bc7c23c7f$export$4681d16351dbb61","obj","requiredProperties","Object","keys","attributeName","setAttribute","classesToAdd","Array","isArray","classList","add","$3a07be1bc7c23c7f$export$7d558e3702f02251","arr","listItemText","newListItem","$3a07be1bc7c23c7f$export$375d3942de154e76","appendChild","optionItemText","optValue","optLabel","optGroup","split","newOptionItem","value","optionGroup","querySelector","label","alt","actualNewElement","newElementLabel","id","getAttribute","append","element","content","innerHTML","innerText","$227a5282996e58c2$export$2e2bcd8739ae039","urlBase","urlSuffix","constructor","baseUrl","url","getJson","urlPath","queryParams","buildRequestUrl","response","fetch","result","json","ok","handleResponseErrors","postJson","formData","options","method","headers","body","FormData","formdataToJson","JSON","stringify","updateJson","deleteJson","dataObject","forEach","key","currValue","isNaN","parseInt","push","status","error","data","errorText","errorMsg","msg","$227a5282996e58c2$export$f2e832acab1bdd79","statusText","URL","searchParams","Error","errorCode","errorMessage","$dc5f931bf6ee91fa$export$3879b24e8245693d","message","errorBox","addEventListener","event","currentTarget","closest","close","showModal","$eee1d11aa096bfee$var$API_URL","$eee1d11aa096bfee$export$12bee4b57621ceb","api","then","taskData","todoBox","wipBox","doneBox","task","card","$eee1d11aa096bfee$export$cf04eaa0632e6ee5","category","taskid","state","assignForm","placeholder","type","name","required","$eee1d11aa096bfee$var$onAssignTaskSubmit","assigned","doneButtonWrapper","deleteButtonWrapper","catch","preventDefault","set","submitter","$eee1d11aa096bfee$export$13ce2202561ee22c","taskFormData","confirm"],"version":3,"file":"index.4a050cd4.js.map"}